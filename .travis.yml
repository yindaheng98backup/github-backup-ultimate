dist: focal
branches:
  only:
    - master
before_install:
  - chmod +x ./*
  - chmod +x ./get_remote_repo/*
  - git lfs install
  - sudo apt-get install -y jq
script:
  - bash -x run_backup_src.sh https://$GH_BKUP_TOKEN@github.com/yindaheng98backup/backup-src master https://$GH_BKUP_TOKEN@github.com/yindaheng98backup/backup master
  - bash -x run_backup_to_tar.gz.sh yindaheng98 $GH_TOKEN https://$GH_BKUP_TOKEN@github.com/yindaheng98backup/backup backup_repo_pack
  - BACKUP_REPO_LIST=$(bash -x get_backup_repo_list.sh yindaheng98 $GH_TOKEN "[\"get_remote_repo/gitee.sh yindaheng98 $GE_TOKEN\",\"get_remote_repo/gitlab.sh yindaheng98 $GL_TOKEN\"]")
  - backup_all_to_remote.sh yindaheng98 yindaheng98 $GH_TOKEN $BACKUP_REPO_LIST
